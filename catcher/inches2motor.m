clear all;
clc;

x_camera = [13.0482 11.9068     8.39499     8.09714     2.14481     0.632331    9.55092     13.1232     14.8764     16.07       12.2234     9.4642      -0.0787156  6.88177     3.38071     1.93115     16.8064     6.98263     7.03115     13.9134     9.80739     14.3048     8.32341     12.3808     7.61576     7.8363      12.4818    1.75829     4.98126     8.32811     4.32628     11.8545     9.58145     11.4208     17.4421     15.8187     11.1668     14.9594     19.1974     12.7177     18.535      16.1246     17.1009     16.9247     19.4875     18.3483     15.976      7.64742     12.0355     8.33187     2.40456     9.06946     13.3479     18.6477     14.8311     15.9372     13.1767     ]';
y_camera = [9.63831 10.8651     6.66258     15.7577     12.6237     18.493      11.5574     7.3155      16.9151     13.0579     8.42211     11.5059     10.5575     16.3602     9.6826      11.9045     13.3749     9.96431     8.62581     17.8841     5.96094     8.81509     16.3884     3.77848     18.0891     14.814      5.32603    6.50045     14.8487     6.84453     13.2918     13.6287     11.3269     15.6199     7.00008     15.2374     8.3781      14.8578     14.8239     6.72643     13.8397     12.2956     8.68252     13.374      13.2666     12.8891     16.1961     14.432      15.6124     13.5125     13.7173     10.0034     11.0566     22.2961     16.332      14.0385     13.1557     ]';
x_motor  = [1       0          -2           -3          -8          -10         -1          2           3           4           1           -1          -10         -4          -7          -9          5           -4          -4          2           -1           3          -3          1           -3          -3          1          -9          -5          -3          -6          0           -2          0           5           4           0           3           7           1           6           4           5           5           7           6           4           -3          1           -3          -8          -2          2           6           3           4           2           ]';
y_motor  = [3       2           6           -1          2           -2          2           5           -2          0           4           2           4           -1          4           2           0            4           5          -3           7           4          -2          8           -3          0           7          7           0           6           1           1           3           -1          5           -1          4           -1          -1          6           -1          1           4           0           0           0           -2          0           -1          1           1           3           2           -6          -2          0           1           ]';

A = [x_camera.^2 y_camera.^2 x_camera y_camera x_camera.*y_camera ones(length(x_camera),1)];

coefficients_x = inv(A'*A)*A'*x_motor
coefficients_y = inv(A'*A)*A'*y_motor

error_x = norm(A*coefficients_x-x_motor)
error_y = norm(A*coefficients_y-y_motor)

fprintf('x_motor = %f*x_camera^2 + %f*y_camera^2 + %f*x_camera + %f*y_camera + %f*x_camera*y_camera + %f\n\n',coefficients_x)

fprintf('y_motor = %f*x_camera^2 + %f*y_camera^2 + %f*x_camera + %f*y_camera + %f*x_camera*y_camera + %f\n\n',coefficients_y)

figure(1);
plot3(x_camera,y_camera,x_motor,'o');
figure(2);
plot3(x_camera,y_camera,y_motor,'o');
figure(3);
plot(-x_motor,y_motor,'x') % Where we've caught the ball.
